<% layout('layouts/boilerplate') %>

    <div class="row">
        <div class="col-12 col-md-6">
            <div id="cluster-map" class="mt-3"></div>
        </div>
        <div class="col-12 col-md-6 overflow-auto mb-5">
            <h1 class="mb-4 display-3 fw-semibold">All Hikes</h1>
                <% campgrounds.forEach((campground, i) => { %>
                    
                        <div class="mb-4">
                            <div class="card h-100">
                                <div class="cardImage">
                                <% if(campground.images.length) { %>
                                    <img crossorigin="anonymous" src="<%= campground.images[0].url %>" alt="" class="card-img-top">
                                <% } else { %>
                                    <img crossorigin="anonymous" src="https://res.cloudinary.com/dfvayulpy/image/upload/v1685992462/YelpCamp/rb0swvldwfdz96isjimr.jpg" alt="" class="card-img-top">
                                <% } %>
                                </div>
                                <!-- <img src="..." class="card-img-top" alt="..."> -->
                                <div class="card-body d-flex align-content-around flex-wrap">
                                    <div><h5 class="card-title"><%= campground.title %></h5></div>
                                    <div><p class="card-text"><%= campground.description %></p></div>
                                    <div class="mt-auto"><p class="card-text">
                                        <small class="text-black-50"><%= campground.location %></small>
                                    </p></div>
                                    <div class="ms-auto"><a href="/campgrounds/<%= campground._id %>" class="btn btn-primary">View <%= campground.title %></a></div>
                                </div>
                            </div>
                        </div>
                    
                <% }) %>
        </div>
    </div>

<script>
    const mapToken = '<%- process.env.MAPBOX_TOKEN %>';
    const campgrounds = { features: <%- JSON.stringify(campgrounds) %> };
</script>
<script src="/javascripts/clusterMap.js"></script>